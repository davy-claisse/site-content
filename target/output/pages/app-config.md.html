<div class="page-header">
<h1>
AppConfig
</h1>
<h4>
configuration library for Java apps
</h4>
</div>
<p>AppConfig is a small configuration library which provides properties for applications deployed to different environments. For example, your local file storage is located at <code>/home/joe/project1/files</code> in a development environment (laptop), but in production it is located on hte NFS: <code>/opt/project1/files</code>.</p>
<p><code>AppConfig</code> makes it easy to configure multiple property files, one per environment and load just one depending what environment the application is running on.</p>
<p>As such, you may have a property file <code>development.properties</code> with content:</p>
<pre><code>file_storage=/home/joe/project1/files</code></pre>
<p>while the <code>production.properties</code> file will include:</p>
<pre><code>file_storage=/opt/project1/files</code></pre>
<h2 id="reading-properties">Reading properties</h2>
<p>First, import a static <code>import AppConfig.p(...)</code> method:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java"><span class="kw">import static org.javalite.app_configAppConfig.p;</span></code></pre></td></tr></table></div>
<p>then, simply call it as: <code>p(..)</code> in places where you need to inject a property:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java">String name = <span class="fu">p</span>(<span class="st">&quot;name&quot;</span>);</code></pre></td></tr></table></div>
<h2 id="setting-an-environment">Setting an environment</h2>
<p><code>AppConfig</code> allows configuration of applications that is specific for different deployment environments. Applications have environment-specific files, whose names follow this pattern: <code>environment.properties</code>, where environment is a name of a deployment environment, such as <code>development</code>, <code>staging</code>, <code>production</code>, etc.</p>
<p>You can also provide a global file, properties from which will be loaded in all environments: global.properties.</p>
<blockquote>
<p>In all cases the files need to be on the classpath under directory/package <code>/app_config</code>.</p>
</blockquote>
<p>Environment-specific file will have an &quot;environment&quot; part of the file name match to an environment variable called <code>ACTIVE_ENV</code>. Such configuration is easy to achieve in Unix shell:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java">export ACTIVE_ENV=test</code></pre></td></tr></table></div>
<p>A typical file structure</p>
<pre><code>/app_config
        |
        +--global.properties
        |
        +--development.properties
        |
        +--staging.properties
        |
        +--production.properties
        </code></pre>
<p>Global property file will always be loaded, while others will be loaded depending on the value of `ACTIVE_ENV`` environment variable.</p>
<blockquote>
<p>If environment variable <code>ACTIVE_ENV</code> is missing, <code>AppConfig</code> defaults to environment <code>development</code>.</p>
</blockquote>
<h2 id="system-property-override">System property override</h2>
<p>You can also provide an environment as a system property app_config.properties.</p>
<p>Here is an example (add this to the startup script for your app):</p>
<pre><code>-Dapp_config.properties=/opt/project1/production.properties</code></pre>
<p>The <code>app_config.properties</code> system property points to a file specific to that computer (local box, server, etc.). If a specific property is provided in the properties file loaded on classpath, and the same property is also found in the file <code>app_config.properties</code>, then the value loaded from a local file overrides the one loaded from classpath.</p>
