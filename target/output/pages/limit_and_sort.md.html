<div class="page-header">
<h1>
Limit and sort
</h1>
</div>
<p>Sometimes, you only need a few records to page through a resultset. This style of data usage is usually found in web applications. An example could be paging through a catalog of products.</p>
<h2 id="limiting-resultsets">Limiting Resultsets</h2>
<p>The &quot;finder&quot; methods, such as <code>find()</code>, <code>findAll()</code> and <code>where()</code> return an instance of a <code>LazyList</code>. This class has a method called <code>limit(int)</code>. It will limit a number of results in the resultset when your programs starts to:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java">List&lt;Person&gt; people = People.<span class="fu">findAll</span>().<span class="fu">limit</span>(<span class="dv">20</span>);</code></pre></td></tr></table></div>
<h2 id="offsetting-start-of-a-page">Offsetting start of a page</h2>
<p>Once you got a first page, you might want to get a next one. This is done with the offset method, found on the same <code>LazyList</code> class like so:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java">List&lt;Person&gt; people = People.<span class="fu">findAll</span>().<span class="fu">limit</span>(<span class="dv">40</span>).<span class="fu">offset</span>(<span class="dv">20</span>);</code></pre></td></tr></table></div>
<p>The code snippet above will find and return 40 records, starting with the 21st record, inclusive.</p>
<h2 id="ordering-results-putting-all-together-fluent-interfaces-style">Ordering results (putting all together Fluent Interfaces style )</h2>
<p>Usually, you would limit, offset and order results in one statement:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java">List&lt;Person&gt; people = People.<span class="fu">findAll</span>().<span class="fu">limit</span>(<span class="dv">40</span>).<span class="fu">offset</span>(<span class="dv">20</span>).<span class="fu">orderBy</span>(<span class="st">&quot;age asc&quot;</span>);</code></pre></td></tr></table></div>
<p>Sometimes this style of programming is called <a href="http://martinfowler.com/bliki/FluentInterface.html">Fluent Interfaces</a> and is credited to Martin Fowler. This style of API is concise, readable and self explanatory.</p>
<h2 id="paginating-for-the-web">Paginating for the web</h2>
<p>Although <code>limit</code>, <code>offset</code> and <code>orderBy</code> themselves are quite simple and powerful methods, ActiveJDBC also provides a convenience class called <code>Paginator</code> especially designed for web applications:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode java">Paginator p = <span class="kw">new</span> <span class="fu">Paginator</span>(Page.<span class="fu">class</span>, <span class="dv">10</span>, <span class="st">&quot;description like ?&quot;</span>, <span class="st">&quot;%Java%&quot;</span>).<span class="fu">orderBy</span>(<span class="st">&quot;created_at desc&quot;</span>);
List&lt;Page&gt; items = p.<span class="fu">getPage</span>(<span class="dv">1</span>);
List&lt;Page&gt; items = p.<span class="fu">getPage</span>(<span class="dv">2</span>);</code></pre></td></tr></table></div>
<p>The instances of this class are lightweight and usually attached to a session. It can be queried for a current page displayed:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java"><span class="dt">int</span> currentPage = paginator.<span class="fu">getCurrentPage</span>();</code></pre></td></tr></table></div>
<p>and for page count like this:</p>
<div class="sourceCode"><table class="sourceCode java numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode java"><span class="dt">int</span> pageCount = paginator.<span class="fu">pageCount</span>();</code></pre></td></tr></table></div>
<p>Using this class in a context of a web application makes it easy to build paging through resultsets.</p>
